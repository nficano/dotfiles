#!/usr/bin/env bash
#/ Return count of existing keys
#/
#/ USAGE:
#/ $(basename "$0") key [key ...]
#/
#/ Available options:
#/    -h, --help      Print this help and exit
#/
#/ Examples:
#/    $(basename "$0") --help
#/    $(basename "$0") key1 key2
set -euo pipefail
HERE="$(cd "$(dirname "$0")" && pwd)"
. "$HERE/../lib/envdb"

usage() { echo "usage: *exists key [key ...]" >&2; }

main() {
  [ $# -ge 1 ] || { usage; exit 2; }
  init_db
  local sum=0
  for key in "$@"; do
    if key_exists "$key"; then
      sum=$((sum+1))
    fi
  done
  echo "$sum"
}

main "$@"
