#!/bin/sh
#/ Copy the current directory or a specified entry to the clipboard.
#/
#/ Usage:
#/    path-copy-clipboard [entry]
#/ EXAMPLES:
#/    cd /usr/local/bin
#/    path-copy-clipboard         # copies /usr/local/bin
#/    path-copy-clipboard jq      # copies /usr/local/bin/jq

set -o errexit          # Exit on most errors (see the manual)
set -o nounset          # Disallow expansion of unset variables
#set -o errtrace        # Make sure any error trap is inherited (BASH only)
#set -o pipefail        # Use last non-zero exit code in a pipeline (BASH only)
#set -o xtrace          # Trace the execution of the script (UNCOMMENT TO DEBUG)

usage () {
    grep '^#/' < "$0" | cut -c4-
    exit 0
}

if [ $# -gt 1 ]; then
    usage
fi

if [ $# -eq 1 ] && [ "$1" = "--help" ]; then
    usage
fi

if [ $# -eq 0 ]; then
  echo "$(pwd)" | tr -d '\n' | pbcopy
else
  echo "$(pwd)/$1" | tr -d '\n' | pbcopy
fi
