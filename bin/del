#!/usr/bin/env bash
#/ Delete one or more keys
#/
#/ USAGE:
#/ $(basename "$0") key [key ...]
#/
#/ Available options:
#/    -h, --help      Print this help and exit
#/
#/ Examples:
#/    $(basename "$0") --help
#/    $(basename "$0") key1 key2
set -euo pipefail
HERE="$(cd "$(dirname "$0")" && pwd)"
. "$HERE/../lib/envdb"

usage() { echo "usage: *del key [key ...]" >&2; }

main() {
  [ $# -ge 1 ] || { usage; exit 2; }
  init_db
  local count=0
  for key in "$@"; do
    if key_exists "$key"; then
      delete_key "$key"
      count=$((count+1))
    fi
  done
  echo "$count"
}

main "$@"
